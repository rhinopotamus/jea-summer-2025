<diagram xmlns="https://prefigure.org" 
         dimensions="(500,300)" 
         margins="(60,30,15,15)">
  <read name="df" filename="1-2-cig-data.csv"/>
  <definition>small_x=filter(df, 'Year', 'small', 'yes')</definition>
  <definition>small_y=filter(df, 'Smoking rate', 'small', 'yes')</definition>
  <definition>small=zip_lists(small_x, small_y)</definition>
  <definition>annual_points=zip_lists(df['Year'], df['Smoking rate'])</definition>
  <coordinates bbox="(0,-0.1,130,4500)">
    <grid-axes
      vticks="(0,250,4500)"
      hticks="(0,5,130)"
      hlabels="(0,10,130)"
      vlabels="(0,500,4500)"
      h-zero-label="yes"
      v-zero-label="yes"
      spacings="((0,5,130),(0,250,4500))"
      xlabel="Y"
      ylabel="S"
    />
    <polygon at="annual" points="annual_points" stroke="blue" dash="2 3"/>
    <group outline="tactile">
      <spline at="partial" points="small" stroke="red" bc-type="clamped" />
      <scatter points="small" fill="blue" />
    </group>
    <legend anchor="(bbox[2], bbox[3])"
            alignment="sw">
      <item ref="annual">Annual data</item>
      <item ref="partial">Partial data</item>
    </legend>

  </coordinates>
</diagram>